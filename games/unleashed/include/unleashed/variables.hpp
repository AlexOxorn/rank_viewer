#pragma once

#include <ox/types.h>
#include "enum.hpp"
#include "structs.hpp"
#include <unordered_map>
#include <helpers.h>

namespace unleashed {
    constexpr long map_offset = 0x100000000;
    constexpr int score_struct_offset = 0x1d8;
    constexpr int speeds_offset = score_struct_offset+0x20;
    constexpr int checkpoint_count_offset = score_struct_offset+0x30;
    constexpr int enemy_offset = score_struct_offset+0x34;
    constexpr int trick_offset = score_struct_offset+0x38;
    constexpr int ranks_offset = score_struct_offset+offsetof(SScoreInfo, SRank);
    constexpr int game_mode_offset = score_struct_offset+ offsetof(SScoreInfo, Mode);

    GAME_VARIABLE(u32, base_pointer, 0x183362f98)
    GAME_INDIRECT_VARIABLE(u32, base_obj, base_pointer, 0)
    GAME_INDIRECT_VARIABLE(u32, rings, base_pointer, 0x538)

    GAME_VARIABLE(u32, score_base_base, 0x183367900);
    GAME_INDIRECT_VARIABLE(u32, score_base, score_base_base, 0x8);
    GAME_INDIRECT_VARIABLE(SScoreInfo, score_data, score_base, score_struct_offset)
    GAME_INDIRECT_VARIABLE(u32, stage_name_ptr, score_base, 0xAC);
    GAME_INDIRECT_VARIABLE(GameMode, game_mode, score_base, game_mode_offset);
    GAME_INDIRECT_VARIABLE(char_array, stage_name, stage_name_ptr, 0);

    GAME_INDIRECT_VARIABLE(u32, enemy_score, score_base, enemy_offset)
    GAME_INDIRECT_VARIABLE(u32, trick_score, score_base, trick_offset)
    GAME_INDIRECT_VARIABLE(u32, top_speed_count, score_base, checkpoint_count_offset)
    GAME_INDIRECT_ARRAY(float, speeds, score_base, speeds_offset, 3)
    GAME_INDIRECT_ARRAY(i32, rank_values, score_base, ranks_offset, 5);

    GAME_INDIRECT_VARIABLE(float, current_time, score_base, 0x5C)

    inline u32 get_werehog_base(process & p) {
        auto& pp = dynamic_cast<unleashed_process&>(p);
        return get_address<u32>(p, pp.werehog_address());
    }

    GAME_INDIRECT_VARIABLE(u32, night_rings, werehog_base, offsetof(night_context, Rings))
    GAME_INDIRECT_VARIABLE(night_context, night_date, werehog_base, 0)


    //[('SonicAddress', '0x183362f98', (2, 10, True, 2, 2), [])]
    /*
0x183282cc4
0x183282e44
0x1832c6634
0x1832c6994
0x1832c6c94
0x1832c8d7c
0x1832c904c
0x1832c913c
0x1832c916c
0x1832c91cc
0x1832c928c
0x1832c949c
0x1832c96ac
0x1832c99dc
0x1832cb854
0x1832cb884
0x1832cb9a4
0x1832cba94
0x1832cbaf4
0x1832cbc14
0x1832cbcd4
0x1832cbee4
0x1832cbf44
0x1832cc304
0x1832cc334
0x1832cc454
0x1832cc544
0x1832cc5a4
0x1832cc6c4
0x1832cc784
0x1832cc994
0x1832cc9f4
0x1832ccdb4
0x1832ccde4
0x1832ccf04
0x1832ccff4
0x1832cd054
0x1832cd174
0x1832cd234
0x1832cd444
0x1832cd4a4
0x1832cd864
0x1832cd894
0x1832cd9b4
0x1832cdaa4
0x1832cdb04
0x1832cdc24
0x1832cdce4
0x1832cdef4
0x1832cdf54
0x1832d1434
0x1832d15b4
0x1832d1944
0x1832d19d4
0x1832d2e54
0x1832d30f4
0x1832d3544
0x1832d612c
0x1832d621c
0x1832d63fc
0x1832d651c
0x1832d669c
0x1832d7bac
0x1832d7d5c
0x1832d7dbc
0x1832d7e1c
0x1832d7f3c
0x1832d805c
0x1832d823c
0x1832d82fc
0x1832d9acc
0x1832d9c7c
0x1832d9dcc
0x1832d9f1c
0x1832da03c
0x1832da2dc
0x1832db604
0x1832db694
0x1832dba54
0x1832f0264
0x1832f0414
0x1832f0534
0x1832f0624
0x1832f0654
0x1832f0730
0x1832f0754
0x1832f0758
0x1832f075c
0x1832f0788
0x1832f07ac
0x1832f07b0
0x1832f07b4
0x1832f1b3c
0x1832f6164
0x1832f61c4
0x1832f63d4
0x1832f6404
0x1832f6434
0x1832f6674
0x1832f66a4
0x1832f66d4
0x1832f6704
0x1832f6764
0x1832f68b4
0x1832f68e4
0x1832f6914
0x1832f6944
0x1832f6974
0x1832f69a4
0x1832f7c9c
0x1832f7d2c
0x1832f7dbc
0x1832f7e4c
0x1832f7edc
0x1832f7f6c
0x1832f811c
0x1832f835c
0x1832fa80c
0x1832fa8cc
0x1832fa9bc
0x1832faa7c
0x1832faadc
0x1832fab6c
0x1832facbc
0x1832faddc
0x1832fae6c
0x1832fb7cc
0x1832fec3c
0x1832feccc
0x1832fee4c
0x1832fee7c
0x1832ff38c
0x1832ff3a4
0x1832ff3bc
0x1832ff3e0
0x183300164
0x183300374
0x18330199c
0x183302768
0x183355354
0x18335535c
0x183355368
0x18335536c
0x183355370
0x183355374
0x18335537c
0x183355380
0x18335538c
0x183355398
0x18335539c
0x1833553a0
0x1833553a4
0x1833553ac
0x1833553c8
0x1833553cc
0x1833553d0
0x1833553d4
0x1833553d8
0x1833553dc
0x1833553f8
0x18336166c
0x18336167c
0x183361684
0x183361688
0x183361694
0x18336169c
0x1833616a0
0x1833616ac
0x1833616b4
0x18336173c
0x18336174c
0x183361754
0x183361758
0x183361764
0x18336176c
0x183361770
0x18336177c
0x183361784
0x183361ec4
0x183361ec8
0x183361ecc
0x183361ed0
0x183361ed4
0x183361edc
0x183361ee0
0x183361ee4
0x183361f38
0x183361f70
0x183361fa4
0x183362014
0x183362f50
0x183362f98
0x183362f9c
0x183362fa4
0x183362fac
0x183362fb4
0x183362fbc
0x183362fc4
0x183362fcc
0x183362fd4
0x183364724
0x183364728
0x183364760
0x183364764
0x183364768
0x18336476c
0x183364770
0x183364774
0x183364778
0x18336477c
0x1833666e0
0x183366af8
0x183366f70
0x183366f74
0x1833671d8
0x1833671dc
0x183367848
0x18336784c
0x183367a34
0x183367a38
0x183367a3c
0x183367a80
0x183367a98
0x183367ab0
0x1833686f8
0x1833686fc
0x183368e9c
0x183368ea0
0x183369008
0x18336900c
0x18336a9b0
0x18336aa04
0x18336b534
0x1833817e0
0x18338b5e4
0x18338baf8
0x18338e888
0x18338e8d4
0x18338e8d4
0x18338e8f8
0x18338e920
0x18338eec8
0x18338eee0
0x18338ef2c
0x18338ef30
0x18338ef30
0x18338ef34
0x18338ef34
0x18338ef5c
0x18338ef5c
0x18338ef6c
0x18338eff8
0x18338f020
0x18338f04c
0x18338f0dc
0x18338f194
0x18338f1c0
0x18338f1f8
0x18338f230
0x18338f258
0x18338f280
0x18338f2a8
0x18338f790
0x1833956c8
0x183395758
0x183395840
0x183395f38
0x183397130
0x183397174
0x183397278
0x18339727c
0x18339727c
0x183397b00
0x183397b0c
0x18339c0e4
0x18339c178
0x18339c17c
0x18339c188
0x18339c18c
0x18339c19c
0x18339c29c
0x18339c650
0x18339c650
0x18339c654
0x18339c658
0x18339c65c
0x18339c660
0x18339c664
0x18339c668
0x18339c66c
0x18339c670
0x18339c674
0x18339c678
0x18339c67c
0x18339c680
0x18339c684
0x18339c688
0x18339c68c
0x18339c694
0x18339c930
0x18339c934
0x18339c938
0x18339c93c
0x18339c940
0x18339cab8
0x18339cea8
0x18339ceb0
0x18339cec0
0x18339cec4
0x18339d120
0x18339d248
0x18339d340
0x18339d348
0x18339d358
0x18339d35c
0x18339d498
0x18339d544
0x18339d54c
0x18339d55c
0x18339d560
0x18339d590
0x18339d598
0x18339d5a8
0x18339d5ac
0x18339d5c4
0x18339d5dc
0x18339dd34
0x18339dd3c
0x18339dd4c
0x18339dd50
0x18339e2ac
0x18339e340
0x18339e474
0x18339e7d4
0x18339e850
0x18339e864
0x18339e868
0x18339e874
0x18339e878
0x18339e8e0
0x18339e8e4
0x18339e8e8
0x18339e8ec
0x18339e8f0
0x18339e8f4
0x18339e8f8
0x18339eb40
0x18339eb44
0x18339eb48
0x18339eb4c
0x18339ece0
0x18339ece0
0x1833a7e70
0x1833a7e94
0x1833a7e9c
0x1833a86d8
0x1833a86dc
0x1833a87dc
0x1833a8814
0x1833a8844
0x1833a8848
0x1833a887c
0x1833a8880
0x1833a8c48
0x1833a8c4c
0x1833a8d98
0x1833aada8
0x1833aadcc
0x1833aaed0
0x1833aaed4
0x18340cfd0
0x18340cfd4
0x18340cfd8
0x18340cfe0
0x18340cfe4
0x18340cfe8
0x18340cfec
0x18340cff0
0x18340cff4
0x18340cff8
0x18340cffc
0x18340d000
0x18340e0c0
0x1834106e0
0x1834106f0
0x1834106f4
0x1834106f8
0x1834106fc
0x183410700
0x183410704
0x183414800
0x183414804
0x183414808
0x18341480c
0x18343de58
0x18344dcc0
0x18344dcc0
0x18344dcc4
0x18344dcc4
0x18344dd00
0x18344dd00
0x18344dd04
0x18344dd04
0x18345a060
0x18345a064
0x18345a068
0x18345a06c
0x18345a070
0x18345a074
0x18345abb8
0x18345ac2c
0x18345ac30
0x18345ac34
0x18345ac38
0x18345ac3c
0x18345ac40
0x18345ac44
0x18345ac48
0x18345ac68
0x18345ac70
0x18345ac74
0x18345ac90
0x18345d714
0x18345da04
     */
}
